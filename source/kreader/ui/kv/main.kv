#:import OverReachingScreenManager kreader.ui.widgets.over_reaching_screenmanager.OverReachingScreenManager
#:import tabbed_names kreader.ui.constants.tabbed_names
#:import over_names kreader.ui.constants.over_names
#:import SideBarCommunicator kreader.ui.widgets.sidebar.SideBarCommunicator
#:import constrain kreader.ui.utils.constrain
#:import transitions kivy.uix.screenmanager
#:import Background kreader.ui.widgets.background.Background
#:import SourcesScreen kreader.ui.screens.sourcesscreen.SourcesScreen

OverReachingScreenManager:
    id: root_manager
    user_input_screen: user_input_screen
    
    on_kv_post:
        self.transition = transitions.NoTransition()
        self.current = over_names.main

    Screen:
        id: user_input_screen
        name: over_names.uinput


    Screen:
        name: over_names.main

        FloatLayout:
            SideBarCommunicator:
                id: side_bar
                size_hint: None, 1
                width: constrain(root.width * .3, 240, 300)
                pos_hint: { 'x': 0, 'top': 1 }
                tabs: { 'Library': tabbed_names.library, 'Browse': tabbed_names.browse, 'Sources': tabbed_names.sources }
                default: 'Sources'
                on_selection:   
                    tabs_screen_manager.current = self.selection
            
            ScreenManager:
                id: tabs_screen_manager
                size_hint: None, 1
                width: root.width - side_bar.width
                pos_hint: { 'right': 1, 'top': 1 }
                transition: transitions.NoTransition()
                Screen:
                    name: tabbed_names.library
                    Background:
                        background_color: 1, 0, 0, 1
                        Label:
                            text: 'Library'
                            color: app.pallete.black
                
                Screen:
                    name: tabbed_names.browse
                    Background:
                        background_color: 0, 1, 0, 1
                        Label:
                            text: 'Browse'
                            color: app.pallete.black

                SourcesScreen:
                    name: tabbed_names.sources
