#:import ImageButton viewer.ui.widgets.image.ImageButton
#:import MangaWidget viewer.ui.widgets.manga.MangaWidget
#:import LoadingBar viewer.ui.widgets.loading_bar.LoadingBar

<SourceScreen>:
    search_box: search_box
    mangas_recycleview: mangas_recycleview
    loading_bar: loading_bar
    
    FloatLayout:
        canvas.before:
            Color:
                rgb: 1, 1, 1
            Rectangle:
                size: root.width, root.height * 0.2
                pos: 0, root.height * 0.8
        
        ImageButton:
            source: app.get_image('back.png')
            size_hint: 0.05, 0.05
            pos_hint: { 'x': 0.005, 'top': 0.995 }
            color: hex(app.pallete.colored_highlight)
            on_press:
                root.go_back_home()

        MDTextField:
            id: search_box
            size_hint: 0.845, 0.1
            pos_hint: { 'x': 0.055, 'top': 1 }
            hint_text: 'Search'
    
        LoadingBar:
            id: loading_bar
            size_hint: 0.1, 0.1
            pos_hint: { 'right': 1, 'top': 0.9}

        ImageButton:
            source: app.get_image('search.png')
            size_hint: 0.1, 0.1
            pos_hint: { 'right': 1, 'top': 1}
            color: hex(app.pallete.colored_highlight)
            on_press:
                root.search()
        
        RecycleView:
            id: mangas_recycleview
            viewclass: 'MangaWidget'
            size_hint: 1, 0.8
            pos_hint: { 'x': 0, 'y': 0}

            RecycleBoxLayout:
                default_size: None, None
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: 10, 0

        MDRaisedButton:
            size_hint: 0.2, 0.1
            pos_hint: { 'right': 1, 'y': 0 }
            text: 'Select'
            on_press:
                root.choose()